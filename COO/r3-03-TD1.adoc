:moduleTitle: R3.03 - Analyse
:authorDefault:  BUT/Info-S3/R3.03
// include::lib/globals.asc[] // temporairement
:tdnum: TD 1

ifdef::eleve[]
:doctitle:  {moduleTitle} - Sujet {tdnum}
endif::eleve[]
ifdef::prof[]
:doctitle: {moduleTitle} - Support {tdnum}
endif::prof[]
ifdef::todoprof[]
:doctitle: {moduleTitle} - DEROULEMENT SEANCE PROF {tdnum}
endif::todoprof[]

= {doctitle}
:Author:  {authorDefault}
:lang: fr
:slideshowlocation: IUT Blagnac
:copyright: {date={localdate}}, {slideshowlocation} *** {author} *** Powered by Asciidoctor &#169;
:incremental:
:source-highlighter: pygments
:numbered: true
:icons: font
:imagesdir: images

// eleve : sujet pour élèves
// prof : support prof pour séance
// todoprof : support AVEC EXPLICATIOSN DEROULEMENT pour profs

//----------- définitions --------------
:sitecours: http://webetud.iut-blagnac.fr/[Support de Cours]
:pre: PreReq
:objtd: ObjTD
:duree: Durée
:depot: À rendre
:lien: Lien
:img: img

//-------------------- Warning si correction -----------
ifdef::prof[]
[CAUTION]
.Version corrigée
=====
Cette version comporte des indications pour les
réponses aux exercices.
=====
endif::prof[]

//-------------------- Cartouche d'en-tête -----------
[[cartouche]]
[align="left",cols="1,10a",width="90%"]
|======================
| {pre}		|
.  Je sais modéliser, mais je dois revoir les bases.
| {objtd}	| Revoir les grands classiques (diagrammes de classes, de séquence, des cas d'utilisation).
| {duree}	| *1 séance* de 1,5h
|======================

NOTE: ce TD reprend l'examen de l'an dernier...

== Diagramme de séquence

Soit le diagramme de séquence suivant :

//.Diagramme de Séquence
image::sd2021.svg[width="70%",scaledwidth="100%"]

:numbered!:
=== Q1

Réalisez un diagramme de classe cohérent avec ce diagramme de séquence (avec méthodes).

//----------------------------------------------------- Correction ------------
[%collapsible]
.Éléments de solution image:icons/solution.png[]
====
.Diagramme de Classes
image::CD.png[width="50%",scaledwidth="70%"]
====
//----------------------------------------------------- fin Correction --------

=== Q2

Ce diagramme de séquence respecte-t'il le paradigme MVC (justifiez votre réponse) ?


//----------------------------------------------------- Correction ------------
[%collapsible]
.Éléments de solution image:icons/solution.png[]
====
Oui car les classes de vue (comme `FormInscription`) ne communiquent pas avec les classes métiers (comme `Catalogue`).
====
//----------------------------------------------------- fin Correction --------


:numbered:

== Diagramme des Cas d'Utilisation

Soit le diagramme de classes suivant :

//.Diagramme des Cas d'Utilisation
image::uc2021.svg[width="70%",scaledwidth="90%"]

Trouvez les 5 erreurs qui se sont glissées dans ce diagramme (entourez et numérotez sur la figure au besoin).

//----------------------------------------------------- Correction ------------
[%collapsible]
.Éléments de solution image:icons/solution.png[]
====
- [ ] On n'hérite pas d'un UC (Client - Acheter et Visiteur - Naviguer)
- [ ] Le `<<extend>>` le plus à gauche est à l'envers
- [ ] Le `<<include>>` devrait être en pointillé
- [ ] Pas d'associations entre UC (Acheter - Client)
====
//----------------------------------------------------- fin Correction --------

== Diagramme de Classes

Soit le diagramme de classes suivant :

//.Diagramme de Classe
image::cd2021.svg[width="40%",scaledwidth="70%"]

:numbered!:

=== Q1

Indiquez, pour chaque classe de ce diagramme, combien son implémentation en Java possède d'attributs.

//----------------------------------------------------- Correction ------------
[%collapsible]
.Éléments de solution image:icons/solution.png[]
====
Personne => 3
Employe => 3
Banque => 5
Agence => 5
CompteBancaire => 4
====
//----------------------------------------------------- fin Correction --------

=== Q2

Nommez les différentes relations présentes dans ce diagramme.

//----------------------------------------------------- Correction ------------
[%collapsible]
.Aide image:icons/solution.png[]
====
Recherchez :

- des classes
- des associations
- des cardinalités (ou multiplicités)
- des attributs
- des relations (héritage ou dépendance)
====
//----------------------------------------------------- fin Correction --------


=== Q3

Donnez un exemple correct de constructeur par défaut pour la classe `Banque`.

//----------------------------------------------------- Correction ------------
[%collapsible]
.Aide image:icons/solution.png[]
====
`Banque` est une composition, donc elle doit être la seule à contenir des références à ses `Agence`s...
====
//----------------------------------------------------- fin Correction --------

//----------------------------------------------------- Correction ------------
[%collapsible]
.Éléments de solution image:icons/solution.png[]
====
[source, java]
----
public class Banque {
	public Banque(int numero, double capital, String adresse) {
		mesAgences = null;
		... 
	}
}
----

NOTE: La méthode `AjouterAgence()` par exemple ne peut pas avoir de paramètre `Agence` (ce ne serait plus une composition).

====
//----------------------------------------------------- fin Correction --------

=== Q4

Soit l'extrait de code suivant :

[source,java]
-----
public class ActionListAgenceBancaire extends GenericAction {

	private String title;
	private List<Action> myMenu;
	
	public ActionListAgenceBancaire (String m, String c, String t) {
		super (m, c);
		this.title = t;
		this.myMenu = new ArrayList<>();
	}
	
	public boolean addAction(Action ac, int index) {
		for (Action myAc : this.myMenu) {
			if (ac == myAc.getParent()) {
				return false;
			}
		}
		this.myMenu.add(index, ac);
		return true;
	}
}
-----

Réalisez un diagramme de classe le plus complet possible cohérent avec ce code.

//----------------------------------------------------- Correction ------------
[%collapsible]
.Aide image:icons/solution.png[]
====
Ne réfléchissez pas, comportez vous comme un générateur de diagramme automatique ;-)!
====
//----------------------------------------------------- fin Correction --------


=== Q5

Réalisez un diagramme de séquence expliquant le fonctionnement de la méthode `addAction(...)` précédente.

//----------------------------------------------------- Correction ------------
[%collapsible]
.Aide image:icons/solution.png[]
====
Idem, ne réfléchissez pas.
Chaque appel de méthode donne lieu à un message entre objets dans le diagramme.
====
//----------------------------------------------------- fin Correction --------


== Sondage

Juste par curiosité : combien de fois avez-vous cliquer sur "Aide" ? Et sur "Solution" (avant qu'on soit à la phase de correction) ?

L'idée est bien d'utiliser ces aides et corrections, mais de moins en moins au fur de la progression du semestre...